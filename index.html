<head>
  <script>
    (async()=>{
      await navigator.serviceWorker.register("sw.js", {type: 'module'});
      if (!navigator.serviceWorker.controller) {
        await new Promise(resolve => navigator.serviceWorker.addEventListener('controllerchange', resolve))
      }
      console.log(navigator.serviceWorker.controller.scriptURL + ' ' + navigator.serviceWorker.controller.state);
    })()
  </script>
</head>
<body>
  test
</body>
